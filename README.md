# unifa-recruit-image-app

## 条件
- [x] 可能であれば「Ruby on Rails」を使用
- [x] 使用するプログラミング言語、フレームワークのバージョンは問わない。ただし、現在利用できるものにしてください。
- [x] 可能な限りフレームワークに備わっているライブラリ以外は使用しない
  - [x] Railsの場合、「rails new」して生成されるGemfileを変更しない。
    - [x] とはいえ、時間も限られているので、ライブラリを使わないと時間がかかりすぎると判断した場合、使ってOKです。
- [x] gitでバージョン管理。
- [ ] 自身が必要と思う範囲でテストコードを追加してほしい。
- [ ] 要件をシンプルに実装してほしい。「今後こういった拡張があるかも」という想定は不要です。

## 1.ログインページの作成
- [x] トップページにアクセスしたら表示
- [x] 「メールアドレス」「パスワード」を入力して、ログインできる。
- [x] 「メールアドレス」は大文字小文字無視で比較してください。例: test@example.com と TEST@EXAMPLE.COM は同じ扱い
とする。
- [x] ログインに成功した場合、写真一覧画面に遷移する。
- 以下の場合、ログインエラーとし、エラー原因と共にログイン画面を再表示する。
  - [x] メールアドレスが未入力
  - [x] パスワードが未入力
  - [x] メールアドレスとパスワードが一致するユーザーが存在しない

## 2. 写真一覧ページの作成
- [x] 現在ログイン中のユーザーがアップロードした写真を、最後にアップロードした順で表示する。
  - [x] 表示する属性は「タイトル」「画像ファイル」
  - [x] 画像が1枚もない場合は画像なしで表示する
- [ ] 「写真アップロード画面」へ遷移するリンクがある。
- [x] 「ログアウト」機能を呼び出すリンクがある。
- [x] 未ログイン状態でこの画面にアクセスした場合、ログイン画面を表示する。

## 3. 写真アップロード画面
- [ ] 「タイトル」「画像ファイル」を指定して、画像をアップロードできる。
- 以下の場合、エラーメッセージと共にアップロード画面を再表示する。
  - [ ] 「タイトル」「画像ファイル」が未入力
  - [ ] 「タイトル」の文字数が30文字を超えている
- [ ] 画像アップロード処理が成功した場合、2の「写真一覧画面」を表示する。（アップロードした写真が先頭に表示される）
- [ ] アップロードをキャンセルし、「写真一覧画面」に戻るリンクがある。
- [ ] 4で作成する「ログアウト」機能を呼び出すリンクがある。
- [ ] 未ログイン状態でこの画面にアクセスした場合、ログイン画面を表示する。

## 4. ログアウト機能
- [x] 未ログイン状態に戻る。
- [x] ログアウト後、ログインページを表示する。

## 5. OAuth認可ページの表示
- [x] 写真一覧ページにOAuthの認可ページを開くためのリンクを表示。
- [x] このリンクをクリックしたら、OAuth連携テストアプリの認可のページを開く。RFC6749の「(A)」の遷移になります。

## 6. OAuthアクセストークンの取得
- [x] 「GET http://localhost:3000/oauth/callback」にリダイレクトされてもエラーにならないようにする。
- [x] この中の処理でURLにセットされた認可コードからアクセストークンを取得し、セッションにセットする。
- [x] アクセストークン取得後、写真一覧画面へリダイレクトさせる。
- [x] 「否認」ボタンが押された時の処理は、対応なし

## 7. 連携アプリケーションへツイートを投稿
- [x] セッションに連携アプリのアクセストークンがセットされている場合、各画像に「ツイートする」ボタンを表示
- ツイートするボタンを押した場合、以下の情報を含むツイートを連携アプリに作成する
  [x] 画像の「タイトル」
  [x] 画像を表示するための「URL」（imgタグに指定されているURL、localhost:3000のURLでOK）
- [x] ツイート後、「写真一覧画面」へリダイレクト


# 提出にあたっての補足
- 条件: gemを追加しました。 bcrypt, faraday, factory_bot(テスト、開発環境データ準備用), rspec(およびテスト用モジュール)
- 1.ログインページの作成: メールアドレス・パスワードの未入力はsubmitさせず、formによるブラウザ上のメッセージを出す。
- 2. 7. 連携アプリケーションへツイートを投稿: ユーザごとのセッションへの保存に悩み、DBに保存。
